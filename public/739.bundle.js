"use strict";(self.webpackChunkJuicebeam_Front=self.webpackChunkJuicebeam_Front||[]).push([[739],{7739:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var o=n(4390),a=n(5043),r=n(4264),i=n.n(r),c=n(5466),l=n(2503),s=n(7474),u=n(5962),m=n(4998),d=n(9879),f=n(3267),h=n(8406),p=n(9350);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}h.p8.registerPlugin(p._);var v=0,y=null,E=0,b=0,w=null,S=[0],T="Main";function M(e){var t,n,o,r=null,i=null,l=null,s=!1,m=c.useState(!1),h=(0,a.Z)(m,2),p=h[0],M=h[1],I=c.useState(!1),C=(0,a.Z)(I,2),k=(C[0],C[1],c.useState(T)),x=(0,a.Z)(k,2),H=x[0],N=x[1],q=f.h.getState().authentication,B=[{name:"buy",function:function(e){n=e[0];var o=!1;console.log(e);for(var a=0;a<w.length;a++)if(n.toUpperCase()==w[a].name.toUpperCase()){t=w[a].cost,K(n=w[a].name),o=!0;break}o||J("You do not have an event called '"+n+"'")}},{name:"back",function:D}],A=[{name:"back",function:D}],P=[{name:"events",function:U},{name:"codex",function:$},{name:"leaderboard",function:function(){}}];function Z(){var e=o;o=function(){if(localStorage.getItem("user"))return JSON.parse(localStorage.getItem("user")).points}(),e&&e!==o&&Q()}(0,c.useEffect)((function(){var t;e.isOpen||""==document.getElementById("line0").innerHTML?e.isOpen&&((t=document.getElementById("command-box")).style.height=t.scrollHeight+"px",t.style.overflowY="hidden",t.addEventListener("input",(function(e){return function(e){for(var t=0;t<15;t++)e.target.style.height=e.target.scrollHeight+"px"}(e)}),!1),""==document.querySelector("#line0").innerHTML&&(v=0),function(){var e="Hello! Please Login To Use BeamChat.";if(!q.loggedIn&&document.getElementById("line0").innerHTML!=e)return G(),void J(e);switch(H){case"Main":D();break;case"Events":U();break;case"Codex":$()}}()):G(),_()}),[H,p]);var _=function(){return f.h.subscribe(Z)};function O(){i&&function(){clearTimeout(y),i=!1,""!=document.getElementById("line0").innerHTML&&G();var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}(l);try{for(t.s();!(e=t.n()).done;){var n=e.value;document.querySelector("#line"+v).innerHTML=n,Y(v);var o="<h1 id='line"+(v+=1)+"' class='text-line'> </h1>";document.querySelector("#display-container").innerHTML=document.querySelector("#display-container").innerHTML+o}}catch(e){t.e(e)}finally{t.f()}}();var e=!1;r=document.getElementById("command-box").value,document.getElementById("command-box").value="";var t,o=r.split(" "),a=o[0];if(o.shift(),"Main"==H)for(var c=0;c<P.length;c++)if(a.toLowerCase()===P[c].name.toLowerCase()){"events"==P[c].name?(T="Events",N("Events")):"codex"==P[c].name?(T="Codex",N("Codex")):B[c].function(o),e=!0;break}if("Events"==H)for(c=0;c<B.length;c++)if(a.toLowerCase()===B[c].name.toLowerCase()){"back"==B[c].name?(T="Main",N("Main")):B[c].function(o),e=!0;break}if("Codex"==H)for(c=0;c<A.length;c++)if(a.toLowerCase()===A[c].name.toLowerCase()){"back"==A[c].name?(T="Main",N("Main")):A[c].function(o),e=!0;break}if(s)return"yes"===a.toLowerCase()||"y"===a?(s=!1,t=n,u.hI.runEvent(t).then((function(e){e.status?console.log("Event Added to Queue Succesfully"):console.log("Event Run failed")})),u.hI.updateLocalUser(),void Q()):"no"==a.toLowerCase()||"n"==a?(s=!1,void J("Purchase Aborted")):void W();e||(i=!0,r.trim().length>0?J("'"+r+"' is not a valid command."):J("Please enter a command."))}function D(){i=!0,console.log("Main Menu Starting"),""!=document.getElementById("line0").innerHTML&&G(),l=["-Welcome to the JuiceStream Panel!","-Enter 'events' to boot up the Event Menu.","-Enter 'codex' to open your codex.","-Enter 'leaderboard' to see who currently has the most juice."],R(0)}function U(){1!=E?(E=1,w=[],u.hI.getEvents().then((function(e){for(var t=0;t<e.length;t++)w[t]=e[t],S[t]=w[t].name+" - "+w[t].cost+" Gallons of Juice";j()}))):j()}function j(){var e,t,n;""!=document.getElementById("line0").innerHTML&&G(),console.log("Events Menu Loaded"),e=l=["-Welcome to the Events Menu!","-Here is your list of available events and their prices.","-Enter 'buy (event)' to purchase an event.","-Enter 'back' to return to the main menu."],t=2,n=S,Array.prototype.splice.apply(e,[t,0].concat(n)),l=e,R(0)}function J(e){i=!0,F(e,0,(function(){V()}))}function F(t,n,o){if(n<t.length){if(!i)return;var a=t.substring(0,n),r=t.substring(0,n+1);r=r.replace(a,"")," "==a.substring(a.length-1)&&(l=v,s=document.querySelector("#line"+l).innerHTML,(u=(u=(s=s.replace('<span class="caret" aria-hidden="true"></span>',"")).split(" ")).filter((function(e){return e})))[u.length-1].includes("Confetti")&&(s=s.replace(u[u.length-1],'<span style="color: #5fdaff;">'+u[u.length-1]+"</span>")),u[u.length-1].includes("Fire")&&(s=s.replace(u[u.length-1],'<span style="color: #ff9900;">'+u[u.length-1]+"</span>")),u[u.length-1].includes("'")&&(s=s.replace(u[u.length-1],'<span style="color: #b8ff0b;">'+u[u.length-1]+"</span>")),document.querySelector("#line"+l).innerHTML=s),document.querySelector("#line"+v).innerHTML=document.querySelector("#line"+v).innerHTML.replace('<span class="caret" aria-hidden="true"></span>',""),document.querySelector("#line"+v).innerHTML=document.querySelector("#line"+v).innerHTML+r+"<span class='caret' aria-hidden='true'></span>",i&&(null!=y&&clearTimeout(y),y=setTimeout((function(){F(t,n+1,o)}),8))}else if("function"==typeof o&&e.isOpen){document.querySelector(".caret").remove();var c="<h1 id='line"+(v+=1)+"' class='text-line'> </h1>";document.querySelector("#display-container").innerHTML=document.querySelector("#display-container").innerHTML+c,y=setTimeout(o,40)}var l,s,u}function R(t){if(void 0===l[t])return i=!1,void(document.getElementById("line"+v).innerHTML=document.getElementById("line"+v).innerHTML+"<span class='caret' aria-hidden='true'></span>");if(t<l[t].length){if(!e.isOpen)return G(),void(t=0);"Main"!=H&&""===document.getElementById("line0").innerHTML&&(i=!0)}F(l[t],0,(function(){i&&R(t+1)}))}function Y(e){for(var t=document.querySelector("#line"+e).innerHTML,n=t.split(" "),o=0;o<n.length;o++)n[o].includes("Confetti")&&(t=t.replace(n[o],'<span style="color: #5fdaff;">'+n[o]+"</span>")),n[o].includes("Fire")&&(t=t.replace(n[o],'<span style="color: #ff9900;">'+n[o]+"</span>")),n[o].includes("'")&&(t=t.replace(n[o],'<span style="color: #b8ff0b;">'+n[o]+"</span>"));document.querySelector("#line"+e).innerHTML=t}function G(){for(var e=v;e>=1;e--)document.querySelector("#line"+v).remove(),v-=1;document.getElementById("line0").innerHTML="",v=0}function W(){J("Spill "+t+" Gallons of Juice for "+n+"? Enter 'Yes' Or 'No'."),s=!0}function K(e){u.hI.checkBalance(e).then((function(t){t?W():J("You do not have enough Juice for the "+e+" event")}))}function $(){""!=document.getElementById("line0").innerHTML&&G(),0==b&&(Q(),b=1)}function Q(){M(!p)}function V(){var e=document.querySelector("#display-container");e.scrollTop=e.scrollHeight}return c.createElement(c.Fragment,null,c.createElement("div",{id:"beamChat",className:e.isOpen?"beam-chat":"beam-chat  d-none"},c.createElement("div",{id:"beam-container"},c.createElement("div",{id:"overlay"}," "),c.createElement("div",{id:"display-container"},c.createElement("div",{className:"menu-title"},c.createElement("h2",null,"".concat(H," Menu"))),c.createElement(L,{forceUpdate:function(){return Q},open:"Codex"==H,clear:G}),c.createElement("h1",{id:"line0",className:"text-line"})),c.createElement("div",{id:"input-container"},c.createElement("textarea",{type:"text",onKeyPress:function(e){13==e.charCode&&(q.loggedIn?(e.preventDefault(),O()):(G(),J("Please Login To Use Beam Chat Commands."),document.getElementById("command-box").value=""))},onChange:V,name:"command-box",id:"command-box",placeholder:"Type Your Command"}),c.createElement("div",{className:"input-footer"},c.createElement("div",{className:"juice-amount_chat"},c.createElement(d.G,{className:"juice-icon-small",style:{position:"relative"},icon:"tint"}),q.loggedIn?q.user.points:"0"," Gallons"),c.createElement("button",{className:"button",onClick:O,role:"button",id:"command-button"},"Send"))))))}function L(e){var t=new Audio("https://sounds.pond5.com/single-click-20-sound-effect-000688351_nw_prev.m4a"),n=new Audio("https://sounds.pond5.com/single-click-15-sound-effect-000688356_nw_prev.m4a"),o=new Audio("https://sounds.pond5.com/lock-padlock-sound-effect-008863055_nw_prev.m4a"),a=new Audio("https://sounds.pond5.com/winding-watch-0001-sound-effect-037821417_nw_prev.m4a"),r=0,i=0,l=[0,0,0],s=1,u=0;if(!e.open)return c.createElement("div",null);function m(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}return l[0]=m(5,25),l[2]=m(5,25),l[0]>l[2]?l[1]=m(2,l[2]):l[1]=m(2,l[0]),console.log(l),(0,c.useEffect)((function(){e.open,p._.create("#knob",{type:"rotation",inertia:!1,dragResistance:.1,onDrag:function(){var e=this;document.querySelector(".gear-container")&&(document.querySelector("#back-gear").style.transform="rotate("+.25*this.rotation+"deg)",document.querySelector("#front-gear").style.transform="rotate("+2.5*this.rotation+"deg)",document.addEventListener("visibilitychange",(function(){return e.endDrag(e.pointerEvent)})),(this.rotation>r+30||this.rotation<r-30)&&(this.rotation>i?(t.play(),r+=30,console.log(r/30),1==s&&u>0&&(u-=1),(1==s&&r/30>r/30+u||3==s&&r/30>r/30+u)&&(console.log(r/30),u=0),1==s&&r/30==l[0]?(s=2,console.log("Success! Switching to step "+s)):3==s&&r/30==l[2]?(console.log("Unlock!"),o.play(),s=1,r=0,h.p8.to("#knob",{rotation:0,duration:1}),this.disable(),setTimeout((function(){e.enable()}),[100])):2==s&&(u+=1,console.log("Error: "+u),3==u&&(console.log("Clicks = "+r/3+" Resetting"),s=1,r=0,u=0,a.play(),h.p8.to("#knob",{rotation:0,duration:1,onComplete:function(){setTimeout((function(){a.pause(),a.currentTime=0}),[20])}}),this.disable(),setTimeout((function(){e.enable()}),[100])))):(r-=30,n.play(),2==s&&r/30<l[1]+3&&(u=0),2==s&&r/30==l[1]?(s=3,console.log("Success! Switching to step "+s)):1!=s&&3!=s||(u+=1,console.log("Error: "+u),3==u&&(console.log("Clicks = "+r/3+" Resetting"),s=1,r=0,u=0,a.play(),h.p8.to("#knob",{rotation:0,duration:1,onComplete:function(){setTimeout((function(){a.pause(),a.currentTime=0}),[20])}}),this.disable(),setTimeout((function(){e.enable()}),[100])))),i=this.rotation))}})})),c.createElement("div",{className:"gear-container"},c.createElement("img",{id:"back-gear",src:"https://imgur.com/fvceanT.png",width:"300",height:"300"}),c.createElement("img",{id:"knob",src:"https://imgur.com/j4Ka5cw.png",width:"300",height:"300"}),c.createElement("img",{id:"front-gear",src:"https://imgur.com/JH1HTZE.png",width:"300",height:"300"}))}const I=function(e){var t=c.useState(!1),n=(0,a.Z)(t,2),r=n[0],d=n[1],f=c.useState(!0),h=(0,a.Z)(f,2),p=h[0],g=h[1],T=c.useState(!1),L=(0,a.Z)(T,2),I=L[0],C=L[1],k=c.useState(!1),x=(0,a.Z)(k,2),H=x[0],N=x[1],q=c.useState(!0),B=(0,a.Z)(q,2),A=B[0],P=B[1],Z=c.useState(!1),_=(0,a.Z)(Z,2),O=(_[0],_[1]),D=c.useState(!1),U=(0,a.Z)(D,2),j=(U[0],U[1]),J=c.useState(""),F=(0,a.Z)(J,2),R=(F[0],F[1]),Y=c.useState("https://www.twitch.tv/embed/jerma985/chat?parent=localhost"),G=(0,a.Z)(Y,2),W=G[0],K=G[1],$=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)};function Q(e){(r&&"BeamChat"!=e||p&&"Twitch"!=e)&&(C(!1),d(!r),g(!p))}function V(){return V=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.hI.reqSettings().then((function(e){R(e[1].twitchName),K("https://www.twitch.tv/embed/"+e[1].twitchName+"/chat?parent=localhost");var t={width:document.getElementById("twitch-player").offsetWidth,height:document.getElementById("twitch-player").offsetHeight,channel:e[1].twitchName,parent:[]};("complete"!=document.readyState||document.querySelector("#SamplePlayerDivID").childNodes.length<=0)&&new Twitch.Player("SamplePlayerDivID",t).setVolume(.5),$(window,"load",z);var n=document.querySelector("#twitch-chat-embed");$(n,"load",z)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function z(){setTimeout((function(){"complete"==document.readyState?(O(!0),setTimeout((function(){P(!1)}),800)):z()}),500)}return(0,c.useEffect)((function(){v=0,y=null,E=0,b=0,w=null,S=[0];var e=u.hI.notifyListener();console.log(e),function(){V.apply(this,arguments)}(),localStorage.getItem("user")?N(!0):N(!1)}),[A]),c.createElement(c.Fragment,null,A?c.createElement(s.gb,{isLoading:A}):"",c.createElement("div",{id:"sub-body",className:"col-lg noscroll"},c.createElement(s.vx,{popupShow:function(){if(I)return C(!1),setTimeout((function(){C(!0)}),50),H;C(!0)},loggedIn:H,logOut:N,style:A?"position-relative ":"position-relative slideInDown fast first-load "}),c.createElement("div",{className:"row h-100 d-flex flex-nowrap"},c.createElement(m.DI,null),c.createElement(m.O$,null),c.createElement("div",{className:"juicetime-column"}),c.createElement("div",{className:A?"player-container pre-load-bottom":"player-container bounceInUp normal"},c.createElement("div",{id:"twitch-player"},c.createElement("div",{id:"SamplePlayerDivID"})),c.createElement("div",{className:"ticker-outer"},c.createElement("div",{className:"ticker-wrap"},c.createElement(m.UI,{forceReload:function(){return j}})))),c.createElement("div",{className:A?"chat-column pre-load-right":"chat-column bounceInRight normal"},c.createElement("div",{className:"chat-toggle"},c.createElement("a",{onClick:function(){return Q("Twitch")},className:p?"pressed d-flex w-50 h-100":"notPressed d-flex w-50 h-100"},c.createElement("span",{className:"m-auto"},"Twitch")),c.createElement("a",{onClick:function(){return Q("BeamChat")},className:r?"pressed d-flex w-50 h-100":"notPressed d-flex w-50 h-100"},c.createElement("span",{className:"m-auto"},"BeamChat"))),c.createElement("div",{className:p?"twitch-chat":"twitch-chat d-none"},c.createElement("iframe",{frameBorder:"0",id:"twitch-chat-embed",src:W})),r?c.createElement(M,{isOpen:r}):"")),c.createElement(l.A,{setPopup:C,show:I,logIn:N})))}}}]);